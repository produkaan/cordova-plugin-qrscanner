function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{K9JO:function(n,t,e){"use strict";e.r(t),e.d(t,"QrScannerPageModule",(function(){return w}));var o=e("ofXK"),i=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),r=e("mrSG"),c=e("fXoL"),l=e("BLr9");function u(n,t){1&n&&c.Kb(0,"img",21)}function g(n,t){1&n&&c.Kb(0,"img",22)}function d(n,t){if(1&n&&(c.Mb(0,"div",23),c.Mb(1,"div",24),c.Kb(2,"img",25),c.Mb(3,"div",26),c.Mb(4,"div",27),c.dc(5),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&n){var e=c.Vb();c.zb(5),c.ec(e.scanCounter)}}var h,b,f,m=[{path:"",component:(h=function(){function n(t,e,o,i,a){_classCallCheck(this,n),this.qrScanner=t,this.toastCtrl=e,this.alertCtrl=o,this.navCtrl=i,this.zone=a,this.isFlashOn=!1,this.continuousMode=!1,this.scanCounter=0,this.isShawAnimation=!1,this.scanResult=[],this.isShowAlert=!1}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"scan",value:function(){var n=this;console.log("scan"),window.document.querySelector("ion-app").classList.add("cameraView"),this.qrScanner.prepare().then((function(t){if(t.authorized){console.log("camera permission was granted"),n.qrScanner.show();var e=n.qrScanner.scan().subscribe((function(t){if(console.log("Scanned something :",t),n.continuousMode){var o=n.scanResult.findIndex((function(n){return n===t}));console.log("alreadyReadIndex",o),o<0&&(console.log("new scan"),n.zone.run((function(){return Object(r.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var t,e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("this.zone.run"),this.scanCounter=this.scanCounter+1,this.isShawAnimation=!0,t=setTimeout((function(){e.isShawAnimation=!1,clearTimeout(t)}),2e3);case 2:case"end":return n.stop()}}),n,this)})))})),n.scanResult.push(t),console.log("scanResult:",n.scanResult," counter:",n.scanCounter)),n.scanAgain()}else console.log("single scan complate"),n.presentAlert(t),n.qrScanner.hide(),e.unsubscribe()}))}else t.denied?console.log("Permission Denied",t):console.log("You can ask for permission again")})).catch((function(n){return console.log("Error is",n)}))}},{key:"scanAgain",value:function(){var n=this,t=this.qrScanner.scan().subscribe((function(e){if(console.log("Scanned something :",e),n.continuousMode){var o=n.scanResult.findIndex((function(n){return n===e}));if(console.log("alreadyReadIndex",o),o<0)console.log("new scan"),n.zone.run((function(){return Object(r.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var t,e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("this.zone.run"),this.scanCounter=this.scanCounter+1,this.isShawAnimation=!0,t=setTimeout((function(){e.isShawAnimation=!1,clearTimeout(t)}),2e3);case 2:case"end":return n.stop()}}),n,this)})))})),n.scanResult.push(e),console.log("scanResult:",n.scanResult," counter:",n.scanCounter);else if(!n.isShowAlert){n.isShowAlert=!0,n.presentToastMsg("Product is already scanned.");var i=setTimeout((function(){console.log("setTimeAlert isShowAlert"),n.isShowAlert=!1,clearTimeout(i)}),3e3)}n.scanAgain()}else console.log("single scan complate"),n.presentAlert(e),n.qrScanner.hide(),t.unsubscribe()}))}},{key:"stopScanning",value:function(){console.log("stopScanning"),this.scanSubscription&&this.scanSubscription.unsubscribe(),this.scanSubscription=null,window.document.querySelector("ion-app").classList.remove("cameraView"),this.qrScanner.hide(),this.qrScanner.destroy()}},{key:"ionViewWillEnter",value:function(){console.log("ionViewWillEnter"),this.scan()}},{key:"ionViewWillLeave",value:function(){console.log("ionViewWillLeave"),this.stopScanning()}},{key:"presentToastMsg",value:function(n){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastCtrl.create({message:n,color:"dark",duration:2e3,position:"top",buttons:[{text:"Ok",role:"cancel",handler:function(){console.log("Ok clicked")}}]});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"presentAlert",value:function(n){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"custom-class",header:"Scan Result",message:n,buttons:[{text:"Ok",role:"cancel",handler:function(){console.log("Ok clicked"),o.navCtrl.navigateBack(["/home"])}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"onFlashChangeClick",value:function(){this.isFlashOn?(this.isFlashOn=!1,this.onTurnOffFlash()):(this.isFlashOn=!0,this.onTurnOnFlash())}},{key:"onTurnOnFlash",value:function(){this.qrScanner.enableLight().then((function(n){console.log("enableLight status",n)})).catch((function(n){return console.log("enableLight error",n)}))}},{key:"onTurnOffFlash",value:function(){this.qrScanner.disableLight().then((function(n){console.log("disableLight status",n)})).catch((function(n){return console.log("disableLight error",n)}))}}]),n}(),h.\u0275fac=function(n){return new(n||h)(c.Jb(l.a),c.Jb(a.s),c.Jb(a.a),c.Jb(a.p),c.Jb(c.z))},h.\u0275cmp=c.Db({type:h,selectors:[["app-qr-scanner"]],decls:29,vars:6,consts:[["color","warning"],["slot","start"],["routerDirection","backward",1,"back-btn",3,"routerLink"],["slot","icon-only","name","chevron-back-outline"],[1,"info-container"],[1,"info-line"],[1,"flash-btn",3,"click"],["class","flash-img","src","../../assets/img/flash-off.png",4,"ngIf"],["class","flash-img","src","../../assets/img/flash-on.png",4,"ngIf"],[1,"camera-overlay"],["src","../../assets/img/red-line.png","alt","","srcset","",1,"camera-red-line","animate__infinite","animate__animated","animate__slideInDown"],["src","../../assets/img/scanner-overlay.png","alt","",1,"camera-overlay-img"],[1,"animation-container",3,"ngClass"],[1,"product"],["src","../../assets/img/product-box.png","alt","",1,"box-img"],["class","conuter-container",4,"ngIf"],[1,"footer-container"],[1,"toggle-container"],[1,"toggle-label"],[1,"toggle-btn"],["mode","ios","color","warning",3,"ngModel","ngModelChange"],["src","../../assets/img/flash-off.png",1,"flash-img"],["src","../../assets/img/flash-on.png",1,"flash-img"],[1,"conuter-container"],[1,"board"],["src","../../assets/img/counter-board.png",1,"board-img"],[1,"box"],[1,"number"]],template:function(n,t){1&n&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-buttons",1),c.Mb(3,"ion-button",2),c.Kb(4,"ion-icon",3),c.Lb(),c.Lb(),c.Mb(5,"ion-title"),c.dc(6,"Product Scan"),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"div",4),c.Mb(9,"div",5),c.dc(10," Keep the product upright and in good lighting for better scanning. "),c.Lb(),c.Mb(11,"div",6),c.Tb("click",(function(){return t.onFlashChangeClick()})),c.cc(12,u,1,0,"img",7),c.cc(13,g,1,0,"img",8),c.Lb(),c.Lb(),c.Mb(14,"div",9),c.Kb(15,"img",10),c.Kb(16,"img",11),c.Lb(),c.Mb(17,"div",12),c.Mb(18,"div",13),c.Kb(19,"img",14),c.Lb(),c.Lb(),c.cc(20,d,6,1,"div",15),c.Mb(21,"div",16),c.Mb(22,"div",5),c.dc(23," Enable Auto Add to List to immediately add scanned items to your shopping List. "),c.Lb(),c.Mb(24,"div",17),c.Mb(25,"div",18),c.dc(26,"Auto Add to Default List"),c.Lb(),c.Mb(27,"div",19),c.Mb(28,"ion-toggle",20),c.Tb("ngModelChange",(function(n){return t.continuousMode=n})),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&n&&(c.zb(3),c.Yb("routerLink","/home"),c.zb(9),c.Yb("ngIf",!t.isFlashOn),c.zb(1),c.Yb("ngIf",t.isFlashOn),c.zb(4),c.Yb("ngClass",t.isShawAnimation?"animate":""),c.zb(3),c.Yb("ngIf",t.continuousMode),c.zb(8),c.Yb("ngModel",t.continuousMode))},directives:[a.g,a.m,a.e,a.d,a.r,s.h,a.h,a.k,a.f,o.i,o.h,a.l,a.b,i.d,i.e],styles:["ion-toolbar[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}ion-content[_ngcontent-%COMP%]{--background:transparent}.info-container[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;padding:16px 20px;background-color:#fff}.info-container[_ngcontent-%COMP%]   .info-line[_ngcontent-%COMP%]{font-size:14px;font-weight:600;text-align:center;padding-right:10px}.info-container[_ngcontent-%COMP%]   .flash-btn[_ngcontent-%COMP%]{width:60px}.info-container[_ngcontent-%COMP%]   .flash-btn[_ngcontent-%COMP%]   .flash-img[_ngcontent-%COMP%]{width:100%;height:auto}.camera-overlay[_ngcontent-%COMP%]{opacity:.5;max-width:71%;max-height:calc(50% - 100px);position:fixed;top:43%;left:50%;transform:translate(-50%,-50%)}.camera-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.camera-overlay[_ngcontent-%COMP%]   .camera-red-line[_ngcontent-%COMP%]{position:absolute;top:0;right:0}@-webkit-keyframes slideInDown{0%{transform:translate3d(0,3100%,0);visibility:visible}50%{transform:translateZ(0)}to{transform:translate3d(0,3100%,0);visibility:visible}}@keyframes slideInDown{0%{transform:translate3d(0,3100%,0);visibility:visible}50%{transform:translateZ(0)}to{transform:translate3d(0,3100%,0);visibility:visible}}.animate__slideInDown[_ngcontent-%COMP%]{-webkit-animation-name:slideInDown;animation-name:slideInDown}.animate__infinite[_ngcontent-%COMP%]{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animate__animated[_ngcontent-%COMP%]{-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.animation-container[_ngcontent-%COMP%]{position:absolute;width:100%;top:37%}.animation-container[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{width:0;margin:auto;transition:width 2s}.animation-container[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .box-img[_ngcontent-%COMP%]{width:100%;height:auto}.animate[_ngcontent-%COMP%]{-webkit-animation:position-animation 1.2s linear;animation:position-animation 1.2s linear}.animate[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{-webkit-animation:image-animation 1.2s linear;animation:image-animation 1.2s linear}@-webkit-keyframes position-animation{to{top:65%}}@keyframes position-animation{to{top:65%}}@-webkit-keyframes image-animation{35%{width:100px}to{width:10px}}@keyframes image-animation{35%{width:100px}to{width:10px}}.conuter-container[_ngcontent-%COMP%]{position:absolute;bottom:19%;width:100%}.conuter-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]{position:relative;width:120px;margin:0 auto}.conuter-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .board-img[_ngcontent-%COMP%]{width:100%;height:auto}.conuter-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{position:absolute;bottom:14px;right:16px;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.conuter-container[_ngcontent-%COMP%]   .board[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:25px;font-weight:600;color:var(--ion-color-warning);text-shadow:0 0 0 #000}.footer-container[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;padding:16px 20px;background-color:#fff}.footer-container[_ngcontent-%COMP%]   .info-line[_ngcontent-%COMP%]{font-size:14px;font-weight:600;text-align:center}.footer-container[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:center;align-items:center;padding-top:10px}.footer-container[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{padding-right:10px;font-size:16px;font-weight:600;text-align:center}"]}),h)}],p=((f=function n(){_classCallCheck(this,n)}).\u0275mod=c.Hb({type:f}),f.\u0275inj=c.Gb({factory:function(n){return new(n||f)},imports:[[s.i.forChild(m)],s.i]}),f),w=((b=function n(){_classCallCheck(this,n)}).\u0275mod=c.Hb({type:b}),b.\u0275inj=c.Gb({factory:function(n){return new(n||b)},imports:[[o.b,i.a,a.n,p]]}),b)}}]);